<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Escáner</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="home_content" *ngIf="!qr.scan">

  <ion-card *ngIf="qr.scanResult">
    <ion-card-header>
      <ion-card-title>Resultado del Escaneo</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <pre style="white-space: pre-wrap; word-break: break-word;">{{ qr.scanResult }}</pre>
    </ion-card-content>
  </ion-card>

  <ion-card *ngIf="JsonObject">
    <ion-card-header>
      <ion-card-title>Datos del QR</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let data of JsonData">
          <ion-label>{{ data }}</ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

</ion-content>

<!-- Escaneo activo -->
<div *ngIf="qr.scan" style="background-color: transparent;">
  <ion-card id="qr_card">
    <ion-card-content>
      Escaneando...
    </ion-card-content>
  </ion-card>

  <ion-button id="btn_flash" fill="outline" size="medium" (click)="flashLight()">
    <ion-icon slot="start" name="flash"></ion-icon>
    Linterna
  </ion-button>
</div>

<!-- Botón para registrar -->
<div *ngIf="userScanned" style="text-align: center; margin-top: 16px;">
  <ion-button id="btn_registerUser" fill="solid" color="primary" (click)="registerUser()">
    Registrar Pasajero
  </ion-button>
</div>

<ion-footer class="ion-padding">
  <ion-button expand="block" id="btn_qr" color="success" (click)="scan()">
    Escanear Código QR
  </ion-button>

  <ion-toast
    [isOpen]="toast.isOpen"
    [message]="toast.message"
    [color]="toast.color"
    [duration]="3000">
  </ion-toast>
</ion-footer>
